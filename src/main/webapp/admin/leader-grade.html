<!doctype html>
<html class="no-js">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>校领导打分统计</title>
		<meta name="description" content="这是一个404页面">
		<meta name="keywords" content="404">
		<meta name="viewport"
			content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="renderer" content="webkit">
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<link rel="icon" type="image/png" href="/GradeSystem/i/favicon.png">
		<link rel="apple-touch-icon-precomposed"
			href="/GradeSystem/i/app-icon72x72@2x.png">
		<meta name="apple-mobile-web-app-title" content="Amaze UI" />
		<link rel="stylesheet" href="/GradeSystem/css/amazeui.min.css" />
		<link rel="stylesheet" href="/GradeSystem/css/admin.css">
        <script type="text/javascript">
	       function changeCadre(){
	           var selectValue = document.getElementById("unit").value;
	           if(selectValue == "请选择"){
	               alert("请选择"); 
	           }else{
	               $.ajax({
	                    url:'../schoolgrade/showcadre.do',
	                    data:{'ofDepartment':selectValue},
	                    datatype:'json',
	                    type:'post',
	                    success:function(data){	     
	                    	console.log(data);
	                       if(data.length==0){
	                    	   $("#personal").empty();
	                    	   alert("该单位今年没有处级干部需要进行考核,仅对单位进行评分！");	                    	   
	                       }else{
	                    	   $("#personal").empty();
	                    	   for(var cadre in data){
	                    		   var optionname = data[cadre].cadreID;
	                    		   var addtr = '<tr><td>'+data[cadre].cadreName+'</td><td>'+data[cadre].position+'</td><td><input type="radio" name="'+optionname+'" value="good"/></td><td><input type="radio" name="'+optionname+'" value="lessGood"/></td><td><input type="radio" name="'+optionname+'" value="common"/></td><td><input type="radio" name="'+optionname+'" value="bad"/></td></tr>';
	                    		   $("#personal").append(addtr);
	                    	   }
	                       } 	                       	                       
	                    }        
	                })
	           }
	       };	       	      	       
	    </script>
	</head>
<body>


	<header class="am-topbar admin-header">
		<div class="am-topbar-brand">
			<strong>江西农业大学年度考核评分系统</strong> <small></small>
		</div>

		<button
			class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only"
			data-am-collapse="{target: '#topbar-collapse'}">
			<span class="am-sr-only">导航切换</span> <span class="am-icon-bars"></span>
		</button>

		<div class="am-collapse am-topbar-collapse" id="topbar-collapse">

			<ul
				class="am-nav am-nav-pills am-topbar-nav am-topbar-right admin-header-list">
				<li><a href="javascript:;"><span class="am-icon-envelope-o"></span>
						收件箱 <span class="am-badge am-badge-warning">5</span></a></li>
				<li class="am-dropdown" data-am-dropdown><a
					class="am-dropdown-toggle" data-am-dropdown-toggle
					href="javascript:;"> <span class="am-icon-users"></span> 管理员 <span
						class="am-icon-caret-down"></span>
				</a>
					<ul class="am-dropdown-content">
						<li><a href="#"><span class="am-icon-user"></span> 资料</a></li>
						<li><a href="#"><span class="am-icon-cog"></span> 设置</a></li>
						<li><a href="#"><span class="am-icon-power-off"></span>
								退出</a></li>
					</ul></li>
				<li><a href="javascript:;" id="admin-fullscreen"><span
						class="am-icon-arrows-alt"></span> <span class="admin-fullText">开启全屏</span></a></li>
			</ul>
		</div>
	</header>

	<div class="am-cf admin-main">
		<!-- sidebar start -->
		<div class="admin-sidebar">
			<ul class="am-list admin-sidebar-list">
			      <li><a href="index.html"><span class="am-icon-home"></span> 首页</a></li>
      <li><a href="/GradeSystem/admin-user.html"><span class="am-icon-check"></span> 个人资料</a></li>
      <li><a href="user-manage.html"><span class="am-icon-map-marker"></span> 用户管理</a></li>
      <li><a href="unit-manage.html"><span class="am-icon-map-marker"></span> 单位管理</a></li>
      <li><a href="grade-table.html"><span class="am-icon-map-marker"></span> 校领导打分统计</a></li>
      <li><a href="set-score-scale.html"><span class="am-icon-map-marker"></span> 评分比例设置</a></li>
      <li><a href="set-assessment-group.html"><span class="am-icon-table"></span> 考核分组设置</a></li>
      <li><a href="teach-unit.html"><span class="am-icon-table"></span> 教学科研单位评分</a></li>
      <li><a href="manage-unit.html"><span class="am-icon-table"></span> 管理服务单位评分</a></li>
		    </ul>

			<div class="am-panel am-panel-default admin-sidebar-panel">
				<div class="am-panel-bd">
					<p>
						<span class="am-icon-bookmark"></span> 公告
					</p>
					<p>时光静好，与君语；细水流年，与君同。—— Amaze UI</p>
				</div>
			</div>

			<div class="am-panel am-panel-default admin-sidebar-panel">
				<div class="am-panel-bd">
					<p>
						<span class="am-icon-tag"></span> wiki
					</p>
					<p>Welcome to the Amaze UI wiki!</p>
				</div>
			</div>
		</div>
		<!-- sidebar end -->

		<!-- content start -->
		<div class="admin-content">

			<div class="am-cf am-padding">
				<div class="am-fl am-cf">
					<strong class="am-text-primary am-text-lg">校领导打分</strong> / <small>处级领导班子和领导干部2017年度考核暨第三轮聘（任）期考核民主测评表</small>

				</div>
			</div>
			
			   <!-- <form action="" method=""> -->
				<div class="am-u-sm-12">
					<table class="am-table am-table-bordered am-table-centered am-table-radius am-table-striped" style="table-layout:fixed;">
					    <tbody>

	                        <tr>
	                            <td colspan="6" class="am-text-center"> 测 评 要 素</td>
	                        </tr>
	                        <tr>
	                            <td colspan="6" class="am-text-center"><small>思想政治建设，团结协作精神与全局观念，工作能力，工作作风，党风廉政建设，群众观念，依法办事，处理复杂问题的能力，单位工作业绩与面貌等。</small></td>                            
	                        </tr>
							<tr>
								<td colspan="2" class="am-text-center">测评对象</td>
								<td colspan="4" class="am-text-center">综合评价</td>
							</tr>
							<tr>
								<td colspan="2" class="am-text-center">
							    	<select id="unit"  onchange="changeCadre()" style=3>
							    		<option value="请选择">请选择</option>							    									    		
							    	</select>
							    </td>							    
								<td><input type="radio" name="grade" value="good"/>好（90分）</td>
								<td><input type="radio" name="grade" value="lessGood"/>较好（75分）</td>
								<td><input type="radio" name="grade" value="common"/>一般（60分）</td>
								<td><input type="radio" name="grade" value="bad"/>较差（40分）</td>
							</tr>														
						</tbody>
                        
                        <tbody>
	                        <tr>
	                            <td colspan="6" class="am-text-center"> 测 评 要 素</td>
	                        </tr>
	                        <tr>
	                            <td>德</td>
	                            <td>能</td>
	                            <td>勤</td>
	                            <td>绩</td>
	                            <td>廉</td>
	                            <td></td>                            
	                        </tr>
	                        <tr>
	                            <td><small>政治素质与思想品德，遵守政治纪律和规矩，事业心与责任感，工作作风，群众观点，协作精神与全局观念等。</small></td>
	                            <td><small>政策与业务水平，组织与管理能力，协调与沟通能力，开拓创新能力等。正职领导驾驭全局、处理复杂问题的能力。</small></td>
	                            <td><small>敬业与奉献精神，工作态度，组织纪律性，勤政务实情况等。</small></td>
	                            <td><small>履行岗位职责情况，工作负荷与完成情况，工作难度与完成质量，办事效率与取得的效益，单位工作业绩与面貌等。</small></td>
	                            <td><small>正确行使权力，依法办事，清正廉洁，以身作则，艰苦朴素。执行八项规定，学法守法、依法办事等情况。</small></td>
	                            <td></td>                            
	                        </tr>
	                        <tr>
	                            <td rowspan="2" class="am-text-middle">姓名</td>
	                            <td rowspan="2" class="am-text-middle">职务</td>
	                            <td colspan="4">综合评价</td>
	                        </tr>
	                        <tr>                       
	                            <td>好（90分）</td>
	                            <td>较好（75分）</td>
	                            <td>一般（60分）</td>
	                            <td>较差（40分）</td>
	                        </tr>
	                     </tbody>
	                     <tbody id="personal">
	                       
                        </tbody>                      
                   </table>
                    <button class="am-btn am-btn-primary am-btn-xs" onclick='commitVote()' >保存提交</button>
                   <!--  <button type="submit" class="am-btn am-btn-primary am-btn-xs" onclick="commitVote()">保存提交</button> -->
                 <!--  </form> -->
                    
				</div>
			</div>
		</div>
		<!-- content end -->

	</div>

	<footer>
		<hr>
		<p class="am-padding-left">© 2018 江西农业大学.蓝点工作室</p>
	</footer>

	<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="/GradeSystem/js/polyfill/rem.min.js"></script>
<script src="/GradeSystem/js/polyfill/respond.min.js"></script>
<script src="/GradeSystem/js/amazeui.legacy.js"></script>
<![endif]-->

	<!--[if (gte IE 9)|!(IE)]><!-->
	<script src="/GradeSystem/js/jquery.min.js"></script>
	<script src="/GradeSystem/js/amazeui.min.js"></script>
	<!--<![endif]-->
	<script src="/GradeSystem/js/app.js"></script>
	<script type="text/javascript">
	 $(document).ready(function(){
         
         $.ajax({
             url:'../schoolgrade/showdepartment.do',
             data:{},
             datatype:'json',
             type:'post',
             success:function(data){      
                 console.log(data);
                if(data.length==0){
                    alert("未获取到单位参数，请稍后重试！");
                }else{
                   // $("#unit").empty();
                    for(var department in data){
                        var addoption = '<option value="'+data[department].departmentId+'">'+data[department].departmentName+'</option>';
                        $("#unit").append(addoption);
                    }
                }                                                   
             }        
         })     　　
       });
	 
	 function commitVote(){		
		 var selectValue = document.getElementById("unit").value;
		 var unitValue = $('input:radio[name="grade"]:checked').val();
		 var unitMap = {};
		 unitMap[selectValue] = unitValue;
		 var dataMap = {};
		 var nameKey = "";
		 var voteResult = "";
         if(selectValue == "请选择"){
        	 alert("请选择对应单位后评分提交！");
        	 return false;
         }
		 
		 if(unitValue==null){
			 alert("请进行选择评分项后提交！");
			 return false;
		 }
		 
		 $('input[type="radio"]').each(function(i,obj){// 遍历所有的radio i是顺序 obj是本身
             if($(obj)[0].checked){ // 判断此radio是不是选中状态 如果是 执行
                 //alert(obj.name+"=="+obj.value);
                 if(obj.name!="grade"){
	                 nameKey = obj.name;
	                 voteResult = obj.value;
	                 dataMap[nameKey]  = obj.value;
                 }
             }
         });
         unitJson = JSON.stringify(unitMap);
		 dataJson = JSON.stringify(dataMap);
		// alert(dataJson);
         
         
           $.ajax({
                url:'../schoolgrade/vote.do',
                data:{"unitMap":unitJson,"dataMap":dataJson},
                datatype:'json',
                type:'post',
                success:function(data){      
                    console.log(data);
                                                            
                },
                error:function(err){
                	alert("error");
                }
            });


     };
	</script>
	
</body>
</html>
